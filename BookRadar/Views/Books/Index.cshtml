@model BookRadar.Web.Models.BookSearchPageVm
@{
    ViewData["Title"] = "Inicio";
}

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="hero-content text-center">
            <div class="hero-icon mb-4">
                <i class="fas fa-book-open"></i>
            </div>
            <h1 class="hero-title mb-3">BookRadar</h1>
            @* <p class="hero-subtitle mb-4">
                Descubre el mundo de los libros con nuestra plataforma inteligente de búsqueda. 
                Encuentra obras recientes de tus autores favoritos usando la API de Open Library.
            </p> *@
            <div class="hero-stats">
                @* <div class="stat-item">
                    <span class="stat-number">50K+</span>
                    <span class="stat-label">Libros</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">100+</span>
                    <span class="stat-label">Autores</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">24/7</span>
                    <span class="stat-label">Disponible</span>
                </div> *@

                <form asp-action="Index" method="post" class="search-form">
                    @Html.AntiForgeryToken()
                    <div class="search-input-group">
                        <div class="search-input-wrapper">
                            <i class="fas fa-user search-icon"></i>
                            <input asp-for="Autor" class="search-input"
                                   placeholder="Ej: Gabriel García Márquez, Stephen King, Isabel Allende..." />
                            <button type="submit" class="search-button">
                                <i class="fas fa-search me-2"></i>
                                Buscar
                            </button>
                        </div>
                    </div>

                    @if (!string.IsNullOrWhiteSpace(Model?.Message))
                    {
                        <div class="alert alert-info mt-4" role="alert">
                            <i class="fas fa-info-circle me-2"></i>
                            @Model.Message
                        </div>
                    }
                </form>
            </div>
        </div>
    </div>
</section>

<!-- Search Section -->
@* <section class="search-section">
    <div class="container">
        <div class="search-wrapper">
            <div class="search-header text-center mb-4">
                <h2 class="search-title">¿Qué autor te gustaría explorar?</h2>
                <p class="search-subtitle">Ingresa el nombre del autor y descubre sus obras más recientes</p>
            </div>
            
            <div class="search-form-container">
                <form asp-action="Index" method="post" class="search-form">
                    @Html.AntiForgeryToken()
                    <div class="search-input-group">
                        <div class="search-input-wrapper">
                            <i class="fas fa-user search-icon"></i>
                            <input asp-for="Autor" class="search-input" 
                                   placeholder="Ej: Gabriel García Márquez, Stephen King, Isabel Allende..." />
                            <button type="submit" class="search-button">
                                <i class="fas fa-search me-2"></i>
                                Buscar
                            </button>
                        </div>
                    </div>
                    
                    @if (!string.IsNullOrWhiteSpace(Model?.Message))
                    {
                        <div class="alert alert-info mt-4" role="alert">
                            <i class="fas fa-info-circle me-2"></i>
                            @Model.Message
                        </div>
                    }
                </form>
            </div>
            
            <!-- Quick Search Suggestions -->
            <div class="quick-search mt-4">
                <p class="quick-search-label">Búsquedas populares:</p>
                <div class="quick-search-buttons">
                    <button type="button" class="quick-search-btn" onclick="setAuthor('Gabriel García Márquez')">
                        Gabriel García Márquez
                    </button>
                    <button type="button" class="quick-search-btn" onclick="setAuthor('Stephen King')">
                        Stephen King
                    </button>
                    <button type="button" class="quick-search-btn" onclick="setAuthor('Isabel Allende')">
                        Isabel Allende
                    </button>
                    <button type="button" class="quick-search-btn" onclick="setAuthor('Mario Vargas Llosa')">
                        Mario Vargas Llosa
                    </button>
                </div>
            </div>
        </div>
    </div>
</section> *@

<!-- Results Section -->
@if (Model?.Resultados?.Any() == true)
{
    <section class="results-section">
        <div class="container">
            <div class="results-wrapper">
                <div class="results-header">
                    <h3 class="results-title">
                        <i class="fas fa-star me-2"></i>
                        Resultados de la búsqueda
                    </h3>
                    <span class="results-badge">
                        @Model.Resultados.Count libro@(Model.Resultados.Count != 1 ? "s" : "")
                    </span>
                </div>
                <partial name="_Results" model="Model.Resultados" />
            </div>
        </div>
    </section>
}


@* 
<!-- History Section -->
<section class="history-section">
    <div class="container">
        <div class="history-wrapper">
            <div class="section-header">
                <h3 class="section-title">
                    <i class="fas fa-history me-2"></i>
                    Historial de búsquedas recientes
                </h3>
                <div class="section-actions">
                    <a asp-action="History" class="btn btn-outline-primary">
                        <i class="fas fa-external-link-alt me-2"></i>
                        Ver historial completo
                    </a>
                </div>
            </div>
            
            @if (Model?.Historial?.Any() == true)
            {
                <div class="table-container">
                    <table class="minimal-table">
                        <thead>
                            <tr>
                                <th>Autor</th>
                                <th>Título</th>
                                <th>Año</th>
                                <th>Editorial</th>
                                <th>Fecha consulta</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var h in Model.Historial.Take(10))
                            {
                                <tr>
                                    <td class="author-cell">
                                        <i class="fas fa-user me-2"></i>
                                        @h.Autor
                                    </td>
                                    <td class="title-cell">@h.Titulo</td>
                                    <td>
                                        @if (h.AnioPublicacion.HasValue)
                                        {
                                            <span class="year-badge">@h.AnioPublicacion</span>
                                        }
                                        else
                                        {
                                            <span class="empty-value">-</span>
                                        }
                                    </td>
                                    <td class="publisher-cell">
                                        @(string.IsNullOrWhiteSpace(h.Editorial) ? "-" : h.Editorial)
                                    </td>
                                    <td class="date-text">
                                        <i class="fas fa-clock me-2"></i>
                                        @h.FechaConsulta.ToString("dd/MM/yyyy HH:mm")
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
            else
            {
                <div class="empty-state">
                    <div class="empty-content">
                        <i class="fas fa-search empty-icon"></i>
                        <h4>No hay búsquedas recientes</h4>
                        <p>Realiza tu primera búsqueda para comenzar a explorar libros</p>
                    </div>
                </div>
            }
        </div>
    </div>
</section> *@

<!-- Features Section -->
<section class="features-section">
    <div class="container">
        <div class="features-wrapper">
            <div class="section-header text-center">
                <h3 class="section-title">¿Por qué elegir BookRadar?</h3>
                <p class="section-subtitle"> </p>
            </div>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h4>Búsqueda Inteligente</h4>
                    <p>Encuentra libros de cualquier autor con nuestra búsqueda optimizada</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-database"></i>
                    </div>
                    <h4>Base de Datos Completa</h4>
                    <p>Accede a millones de libros a través de la API de Open Library</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <h4>Historial Persistente</h4>
                    <p>Mantén un registro de todas tus búsquedas y descubrimientos</p>
                </div>
                
            </div>
        </div>
    </div>
</section>

<script>
function setAuthor(authorName) {
    document.querySelector('input[name="Autor"]').value = authorName;
    document.querySelector('.search-form').submit();
}
</script>
